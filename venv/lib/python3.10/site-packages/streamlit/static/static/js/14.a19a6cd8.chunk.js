"use strict";(self.webpackChunkstreamlit_browser=self.webpackChunkstreamlit_browser||[]).push([[14],{28014:function(e,t,i){i.r(t),i.d(t,{default:function(){return F}});var n=i(1413),a=i(15671),r=i(43144),o=i(97326),l=i(60136),s=i(29388),u=i(47313),d=i(16031),m=i(78947),h=i(83985),c=i(17076),f=i(46332),p=i(7976),g=i(64243),b=i(70816),v=i.n(b),y=i(65167),T=i(73290),R=i(80213),V=i(47167),k=i(2120),x=(0,V.Z)("div",{target:"e88czh83"})((function(e){var t=e.disabled,i=e.theme;return{alignItems:"center",backgroundColor:t?i.colors.gray:i.colors.primary,borderTopLeftRadius:"100%",borderTopRightRadius:"100%",borderBottomLeftRadius:"100%",borderBottomRightRadius:"100%",borderTopStyle:"none",borderBottomStyle:"none",borderRightStyle:"none",borderLeftStyle:"none",boxShadow:"none",display:"flex",height:i.radii.xl,justifyContent:"center",width:i.radii.xl,":focus":{outline:"none"},":focus-visible":{boxShadow:"0 0 0 0.2rem ".concat((0,k.DZ)(i.colors.primary,.5))}}}),""),w=(0,V.Z)("div",{target:"e88czh82"})((function(e){var t=e.disabled,i=e.theme;return{fontFamily:i.fonts.monospace,fontSize:i.fontSizes.sm,paddingBottom:i.spacing.twoThirdsSmFont,color:t?i.colors.gray:i.colors.primary,top:"-22px",position:"absolute",whiteSpace:"nowrap",backgroundColor:i.colors.transparent,lineHeight:i.lineHeights.base,fontWeight:"normal"}}),""),S=(0,V.Z)("div",{target:"e88czh81"})((function(e){var t=e.theme;return{paddingBottom:t.spacing.none,paddingLeft:t.spacing.none,paddingRight:t.spacing.none,paddingTop:t.spacing.twoThirdsSmFont,justifyContent:"space-between",alignItems:"center",display:"flex"}}),""),C=(0,V.Z)("div",{target:"e88czh80"})((function(e){var t=e.disabled,i=e.theme;return{lineHeight:i.lineHeights.base,fontWeight:"normal",fontSize:i.fontSizes.sm,fontFamily:i.fonts.monospace,color:t?i.colors.fadedText40:"inherit"}}),""),D=i(46417),B=function(e){(0,l.Z)(i,e);var t=(0,s.Z)(i);function i(e){var r;return(0,a.Z)(this,i),(r=t.call(this,e)).formClearHelper=new f.Kz,r.state=void 0,r.sliderRef=u.createRef(),r.thumbRef=[],r.thumbValueRef=[],r.commitWidgetValueDebounced=void 0,r.commitWidgetValue=function(e){r.props.widgetMgr.setDoubleArrayValue(r.props.element,r.state.value,e)},r.onFormCleared=function(){r.setState((function(e,t){return{value:t.element.default}}),(function(){return r.commitWidgetValue({fromUi:!0})}))},r.handleChange=function(e){var t=e.value;r.setState({value:t},(function(){return r.commitWidgetValueDebounced({fromUi:!0})}))},r.renderThumb=u.forwardRef((function(e,t){var i,a=e.$value,o=e.$thumbIndex,l=o||0;r.thumbRef[l]=t,(i=r.thumbValueRef)[l]||(i[l]=u.createRef());var s=a?r.formatValue(a[o]):"",m=(0,d.pick)(e,["role","style","aria-valuemax","aria-valuemin","aria-valuenow","tabIndex","onKeyUp","onKeyDown","onMouseEnter","onMouseLeave","draggable"]);return r.props.element.options.length>0||r.isDateTimeType(),r.thumbValueAlignment(r.thumbRef[l].current,r.thumbValueRef[l].current),(0,D.jsx)(x,(0,n.Z)((0,n.Z)({},m),{},{disabled:!0===e.$disabled,ref:r.thumbRef[l],"aria-valuetext":s,"aria-label":r.props.element.label,children:(0,D.jsx)(w,{className:"StyledThumbValue","data-testid":"stThumbValue",disabled:!0===e.$disabled,ref:r.thumbValueRef[l],children:s})}))})),r.renderTickBar=function(){var e=r.props,t=e.disabled,i=e.element,n=i.max,a=i.min;return(0,D.jsxs)(S,{"data-testid":"stTickBar",children:[(0,D.jsx)(C,{disabled:t,"data-testid":"stTickBarMin",children:r.formatValue(a)}),(0,D.jsx)(C,{disabled:t,"data-testid":"stTickBarMax",children:r.formatValue(n)})]})},r.commitWidgetValueDebounced=(0,g.Ds)(200,r.commitWidgetValue.bind((0,o.Z)(r))),r.state={value:r.initialValue},r}return(0,r.Z)(i,[{key:"initialValue",get:function(){var e=this.props.widgetMgr.getDoubleArrayValue(this.props.element);return void 0!==e?e:this.props.element.default}},{key:"componentDidMount",value:function(){for(var e=0;e<Math.min(this.thumbRef.length,this.thumbValueRef.length);e++)this.thumbValueAlignment(this.thumbRef[e].current,this.thumbValueRef[e].current);this.props.element.setValue?this.updateFromProtobuf():this.commitWidgetValue({fromUi:!1})}},{key:"componentDidUpdate",value:function(){this.maybeUpdateFromProtobuf()}},{key:"componentWillUnmount",value:function(){this.formClearHelper.disconnect()}},{key:"maybeUpdateFromProtobuf",value:function(){this.props.element.setValue&&this.updateFromProtobuf()}},{key:"updateFromProtobuf",value:function(){var e=this,t=this.props.element.value;this.props.element.setValue=!1,this.setState({value:t},(function(){e.commitWidgetValue({fromUi:!1})}))}},{key:"value",get:function(){var e=this.props.element,t=e.min,i=e.max,n=this.state.value,a=n[0],r=n.length>1?n[1]:n[0];return a>r&&(a=r),a<t&&(a=t),a>i&&(a=i),r<t&&(r=t),r>i&&(r=i),n.length>1?[a,r]:[a]}},{key:"isDateTimeType",value:function(){var e=this.props.element.dataType;return e===p.iR.DataType.DATETIME||e===p.iR.DataType.DATE||e===p.iR.DataType.TIME}},{key:"formatValue",value:function(e){var t=this.props.element,i=t.format,n=t.options;return this.isDateTimeType()?v().utc(e/1e3).format(i):n.length>0?(0,c.sprintf)(i,n[e]):(0,c.sprintf)(i,e)}},{key:"thumbValueAlignment",value:function(e,t){var i=this.sliderRef.current;if(i&&e&&t){var n=i.getBoundingClientRect(),a=e.getBoundingClientRect(),r=t.getBoundingClientRect(),o=a.left+a.width/2,l=o-r.width/2<n.left,s=o+r.width/2>n.right;t.style.left=l?"0":"",t.style.right=s?"0":""}}},{key:"render",value:function(){var e,t=this.props,i=t.disabled,a=t.element,r=t.theme,o=t.width,l=t.widgetMgr,s=r.colors,u=r.fonts,d=r.fontSizes,h=r.spacing,c={width:o};return this.formClearHelper.manageFormClearListener(l,a.formId,this.onFormCleared),(0,D.jsxs)("div",{ref:this.sliderRef,className:"stSlider",style:c,children:[(0,D.jsx)(y.ON,{label:a.label,disabled:i,labelVisibility:(0,g.iF)(null===(e=a.labelVisibility)||void 0===e?void 0:e.value),children:a.help&&(0,D.jsx)(y.dT,{children:(0,D.jsx)(T.ZP,{content:a.help,placement:R.ug.TOP_RIGHT})})}),(0,D.jsx)(m.Z,{min:a.min,max:a.max,step:a.step,value:this.value,onChange:this.handleChange,disabled:i,overrides:{Root:{style:{paddingTop:h.twoThirdsSmFont}},Thumb:this.renderThumb,Tick:{style:{fontFamily:u.monospace,fontSize:d.sm}},Track:{style:{backgroundColor:"none !important",paddingBottom:0,paddingLeft:0,paddingRight:0,paddingTop:h.twoThirdsSmFont}},InnerTrack:{style:function(e){var t=e.$disabled;return(0,n.Z)({height:"4px"},t?{background:s.darkenedBgMix25}:{})}},TickBar:this.renderTickBar}})]})}}]),i}(u.PureComponent),F=(0,h.b)(B)}}]);